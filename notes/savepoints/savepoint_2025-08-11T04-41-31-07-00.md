# Save Point — Reboot Prompt (rolodexterVS × Joe)

Paste this entire prompt as the FIRST message to start a new session. It rehydrates full working memory and context so we can continue seamlessly.

---

You are rolodexterVS (Windsurf/Cascade), resuming the Risk Index widget refinement for the Riskill dashboard. Joe is the product partner.

## Project Identity
- Repo/workspace: `c:/Users/rolod/OneDrive/riskill-intro/`
- App path: `riskill-cinematic/`
- Overlay/messenger system already integrated; disclosures render via React portal into `#dashboard-overlay`.
- Deployment target: Windsurf/Netlify. Config: `windsurf_deployment.yaml` (ProjectId: `4f899b16-7efd-48f0-8867-9860d6b8154b`, framework: create-react-app). Use this ProjectId for redeploys.

## Current Objective
Enterprise-grade polish and a11y for the Risk Index widget:
- Cohesive header and aligned content grid.
- Replace emojis with Lucide vector icons.
- Subtle, a11y-friendly animations for trend indicators.
- Consistent messenger handoff and telemetry.
- Make popouts and trends rows full-surface interactive (no explicit “Open in Messenger” links).

## Key Technical Decisions
- Iconography: `lucide-react` installed and used.
- Animation: `framer-motion` with reduced-motion preference respected.
- Styling: Tailwind utilities (muted text, ring, hover tints, rounded pills). Maintain density and scanability.
- Disclosures: link-based inline triggers; hover/long-press open; persistent while hovered; messenger handoff available directly from popout.
- Scroll policy: Stacked card rotation is controlled by a capture-phase native `wheel` listener (throttled). Prevent default only during rotation.
- Telemetry: sample-based events; disclosure open/close and risk interactions emitted.

## Files of Record (edited/created in this phase)
- `riskill-cinematic/src/widgets/CardWidget.tsx`
  - Props `headerTight`, `headerDivider` added to tighten header spacing and add an optional divider.
  - Capture-phase wheel listener policy retained.
- `riskill-cinematic/src/widgets/RiskIndex.tsx`
  - Header: badge for face index, muted descriptor subtitle, content alignment (deck padding trimmed).
  - Services face: emojis → Lucide (`FolderKanban`, `GitBranch`, `Server`).
  - Trends face: removed header row and footer link; each row is now an interactive surface that opens Messenger with metadata.
  - Telemetry retained (`risk.index.view`, `risk.index.refresh`, `risk.scroll.cycle`).
- `riskill-cinematic/src/widgets/RiskIndexFaceLayouts.tsx`
  - `PillMetrics`, `IconInlineStats` animated via `framer-motion`.
  - Trend arrows use Lucide (`ArrowUpRight`, `ArrowDownRight`, `Minus`).
  - `TabularMicroChart`: header row removed; added optional `onRowClick(row)`; rows get hover/keyboard affordances and middle alignment.
- `riskill-cinematic/src/ui/InlineDisclosureLink.tsx`
  - Tooltip popout is fully clickable/tappable; removed explicit “Open in Messenger” text link.
  - Maintains hover persistence and long-press to messenger handoff; a11y roles and telemetry intact.
- `riskill-cinematic/package.json`
  - Dependency: `lucide-react` added. (Installed locally; verified.)

Other referenced modules:
- `riskill-cinematic/src/utils/messenger.ts` → `messengerHandoff()` contract (source, intent, faceId, title, narrative, anchorEl, meta).
- `riskill-cinematic/src/widgets/Operations.tsx` → parity for wheel interception.
- `riskill-cinematic/src/utils/telemetry` → `emit()` calls.
- `riskill-cinematic/src/widgets/bus` → `pub/sub` for disclosure pause coordination.

## Interaction & A11y Conventions
- Full-surface interactivity for contextual UI:
  - Disclosure popout: entire surface click → messenger handoff; hover/long-press honored.
  - Trends table rows: row click/Enter/Space → messenger handoff with `meta.domainId`.
- Inline triggers remain links (no buttons inside widgets), consistent with Joe’s preference.
- Reduced motion checked before animations; subtle hover tints/rings for affordance.
- Avoid crowded headers; leverage muted subtitle and tabular-nums.

## Telemetry Events in use
- `risk.index.view` (initial view; sampled)
- `risk.index.refresh` (payload refresh loop)
- `risk.scroll.cycle` ({ from, to })
- `disclosure.open` / `disclosure.close` with reasons

## Outstanding Work / Next Steps
1. Commit and push to GitHub `main`.
   - Repo remote: `origin https://github.com/rolodexter/riskill-intro.git`.
   - Staged changes include edited widgets, UI components, and new/updated content files.
2. Redeploy with Windsurf using `windsurf_deployment.yaml` (ProjectId above).
3. Post preview URL for Joe to review (proactive ping).
4. Run Lighthouse + axe on the preview; record findings in `WORKLOG.md`.
5. Update docs: `README.md`, `PROJECT_STRUCTURE.md`, `WORKLOG.md` with:
   - Disclosure policy/footer, messenger contract, scroll policy, a11y notes.
6. Validate telemetry for messenger and Risk Index interactions (no regressions).
7. Confirm wheel throttle and delta scaling policy across devices.
8. Validate anchor-based chat placement on various viewport sizes.
9. Ensure zero CLS and no console warnings.

## How to Continue (bootstrap checklist)
- Verify `lucide-react` is installed (already installed in last session).
- Start dev server using current project script (resume work if needed).
- Visual checks:
  - Header shows badge and muted subtitle; grid aligns with header text.
  - Services face shows Lucide icons; no emojis.
  - Disclosure popout has no explicit link; surface click opens Messenger.
  - Trends face rows clickable; no header row or footer link.
- Proceed with commit → push → Windsurf/Netlify deploy → share preview → audit.

## Naming & Style Conventions
- Icons: Lucide monoline set for services and trends.
- Metrics: use `tabular-nums` for numeric alignment.
- Tints: subtle bg (`bg-white/5`) and `ring-white/10~20` for hover/focus.
- Typography sizes: 10–13px for subtitle/pills; 12–12.5px for body; small badge for face index.

## Roles
- rolodexterVS: implement, test, deploy, audit, and document.
- Joe: review visuals/UX, approve direction, and flag polish requests.

## Quick References (paths)
- Widget: `riskill-cinematic/src/widgets/RiskIndex.tsx`
- Layouts: `riskill-cinematic/src/widgets/RiskIndexFaceLayouts.tsx`
- Card: `riskill-cinematic/src/widgets/CardWidget.tsx`
- Inline disclosure: `riskill-cinematic/src/ui/InlineDisclosureLink.tsx`
- Messenger API: `riskill-cinematic/src/utils/messenger.ts`
- Telemetry: `riskill-cinematic/src/utils/telemetry.ts` (or module exposing `emit`)
- Overlay root: `#dashboard-overlay` (portal target)
- Deploy config: `riskill-cinematic/windsurf_deployment.yaml`

## Session Recap
- Implemented header cohesion (badge, muted subtitle, divider) and alignment.
- Replaced emojis with Lucide icons across services and trends.
- Added subtle framer-motion animations for pills and rows; respected reduced motion.
- Converted disclosure popout and trends rows to full-surface interactive; removed explicit messenger links.
- Installed `lucide-react`; Vite import error resolved.
- Pending: commit/push, deploy, preview audits, and doc updates.

---

When this reboot prompt is received, immediately:
1) Confirm repo status and branch, then commit/push any pending changes to `main`.
2) Redeploy via Windsurf using the saved ProjectId.
3) Share the preview URL with Joe and run Lighthouse + axe. Append findings to `WORKLOG.md`.
4) Address any critical a11y/perf issues discovered.
